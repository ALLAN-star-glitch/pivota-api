syntax = "proto3";

package categories;

// ----------------------
// SERVICE DEFINITION
// ----------------------
service CategoriesService {
  rpc CreateCategory (CreateCategoryRequest) returns (BaseCategoryResponse);
  rpc DeleteCategory (DeleteCategoryRequest) returns (DeleteCategoryResponse);
  rpc GetCategories (Empty) returns (ListCategoriesResponse);
  rpc GetCategoryById (GetCategoryByIdRequest) returns (BaseCategoryResponse);
  rpc GetCategoryByName (GetCategoryByNameRequest) returns (BaseCategoryResponse);
}

// ----------------------
// ERROR PAYLOAD
// ----------------------
message ErrorPayload {
  string code = 1;
  string message = 2;
  string details = 3;
}

// ----------------------
// BASE CATEGORY RESPONSE
// ----------------------
message BaseCategoryResponse {
  bool success = 1;
  string code = 2;
  string message = 3;
  Category category = 4;
  ErrorPayload error = 5;
}

// ----------------------
// CATEGORY MESSAGES
// ----------------------
message Category {
  string id = 1;
  string name = 2;
  string description = 3;
  string parentId = 4;

  int32 jobPostsCount = 5;
  int32 providerJobsCount = 6;
  int32 subcategoriesCount = 7;


  bool hasSubcategories = 8;
  bool hasParent = 9;
  repeated Category subcategories = 10;

  string createdAt = 11;
  string updatedAt = 12;
}

// ----------------------
// REQUEST MESSAGES
// ----------------------
message CreateCategoryRequest {
  string name = 1;
  string description = 2;
  string parentId = 3;
}

message DeleteCategoryRequest {
  string id = 1;
}

message GetCategoryByIdRequest {
  string id = 1;
}

message GetCategoryByNameRequest {
  string name = 1;
}


// ----------------------
// LIST & GET CATEGORY RESPONSES
// ----------------------
message ListCategoriesResponse {
  bool success = 1;
  string code = 2;
  string message = 3;
  repeated Category categories = 4;
  ErrorPayload error = 5;

}


// ----------------------
// DELETE CATEGORY RESPONSE
// ----------------------
message DeleteCategoryResponse {
  bool success = 1;
  string code = 2;
  string message = 3;
}

// ----------------------
// EMPTY MESSAGE (for ListCategories)
// ----------------------
message Empty {}
